<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Love Clicker üíñ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --primary: #ff6b8b;
            --secondary: #ff8e9e;
            --accent: #ffccd5;
            --gold: #ffd700;
            --purple: #c77dff;
            --blue: #48cae4;
            --pink: #ff9ff3;
            --green: #00ff9d;
            --dark: #1a1b2e;
            --light: #fff5f7;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark) 0%, #2a2d43 100%);
            min-height: 100vh;
            color: var(--light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            touch-action: manipulation;
            position: relative;
        }
        
        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
        #bgCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px 15px;
            position: relative;
            z-index: 2;
        }
        
        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–¥–ø–∏—Å—å "–î–∏–∞–Ω–∫–∞, —É–ª—ã–±–∞–π—Å—è" */
        .smile-text {
            text-align: center;
            margin-bottom: 25px;
            padding: 15px;
            position: relative;
        }
        
        .animated-text {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(45deg, 
                var(--pink), 
                var(--primary), 
                var(--purple), 
                var(--blue),
                var(--green)
            );
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradientFlow 5s ease infinite;
            text-shadow: 0 0 20px rgba(255, 107, 139, 0.3);
            padding: 10px 20px;
            border-radius: 15px;
            display: inline-block;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        /* –ü–æ—Ü–µ–ª—É–π—á–∏–∫–∏ */
        .kiss {
            position: fixed;
            font-size: 40px;
            z-index: 1000;
            pointer-events: auto;
            animation: kissFloat 6s ease-in-out forwards;
            cursor: pointer;
            transition: transform 0.2s;
            filter: drop-shadow(0 0 15px rgba(255, 20, 147, 0.8));
            user-select: none;
        }
        
        .kiss:hover, .kiss:active {
            transform: scale(1.3);
        }
        
        .kiss.caught {
            animation: kissCaught 0.8s ease-out forwards;
            pointer-events: none;
        }
        
        @keyframes kissFloat {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            15% {
                opacity: 1;
                transform: translateY(85vh) rotate(180deg) scale(1);
            }
            85% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(720deg) scale(0.5);
                opacity: 0;
            }
        }
        
        @keyframes kissCaught {
            0% {
                transform: scale(1);
                opacity: 1;
                filter: drop-shadow(0 0 20px rgba(255, 20, 147, 1));
            }
            100% {
                transform: scale(3) translateY(-50px);
                opacity: 0;
                filter: drop-shadow(0 0 50px rgba(255, 20, 147, 1));
            }
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ */
        .heart-section {
            position: relative;
            margin: 30px 0;
        }
        
        .pulse-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 220px;
            height: 220px;
            border: 2px solid var(--primary);
            border-radius: 50%;
            animation: pulse 2s infinite;
            opacity: 0.3;
        }
        
        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0.3;
            }
            50% {
                opacity: 0.1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 0;
            }
        }
        
        .heart-btn {
            width: 180px;
            height: 180px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            cursor: pointer;
            user-select: none;
            border: none;
            box-shadow: 
                0 15px 35px rgba(255, 107, 139, 0.4),
                inset 0 8px 20px rgba(255, 255, 255, 0.2),
                0 0 0 8px rgba(255, 255, 255, 0.1);
            transition: all 0.2s;
            position: relative;
            z-index: 2;
            transform-style: preserve-3d;
        }
        
        .heart-btn:active {
            transform: scale(0.92);
            box-shadow: 
                0 5px 15px rgba(255, 107, 139, 0.6),
                inset 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 20px 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.12);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--purple));
        }
        
        .stat-icon {
            font-size: 1.8rem;
            margin-bottom: 10px;
            display: block;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--gold);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
            display: block;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: var(--accent);
            opacity: 0.8;
            margin-top: 5px;
        }
        
        /* –ú–∞–≥–∞–∑–∏–Ω —É–ª—É—á—à–µ–Ω–∏–π */
        .shop-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px 20px;
            margin-top: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-height: 400px;
            overflow-y: auto;
        }
        
        .shop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .shop-title {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--blue), var(--purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .upgrade-item {
            background: rgba(255, 255, 255, 0.07);
            border-radius: 15px;
            padding: 18px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .upgrade-item:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(5px);
            border-color: rgba(255, 107, 139, 0.3);
        }
        
        .upgrade-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .upgrade-name {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .upgrade-cost {
            background: rgba(255, 215, 0, 0.1);
            color: var(--gold);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        .upgrade-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            font-size: 0.9rem;
            color: var(--accent);
        }
        
        .upgrade-effect {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .upgrade-count {
            color: var(--blue);
            font-weight: 600;
        }
        
        .buy-btn {
            background: linear-gradient(45deg, var(--primary), var(--purple));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 15px;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
        }
        
        .buy-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 139, 0.3);
        }
        
        .buy-btn:active:not(:disabled) {
            transform: translateY(0);
        }
        
        .buy-btn.enabled {
            background: linear-gradient(45deg, var(--primary), var(--purple));
            animation: pulseBtn 1.5s infinite;
        }
        
        .buy-btn.disabled {
            background: linear-gradient(45deg, #666, #888);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.6;
        }
        
        @keyframes pulseBtn {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 107, 139, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(255, 107, 139, 0); }
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: linear-gradient(45deg, var(--primary), var(--purple));
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            text-align: center;
            max-width: 90%;
            box-shadow: 0 10px 30px rgba(255, 107, 139, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .notification.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        /* –ë–æ–Ω—É—Å –∑–∞ 5 –º–æ–Ω–µ—Ç */
        .bonus-5-coins {
            position: fixed;
            font-size: 25px;
            z-index: 999;
            pointer-events: none;
            animation: bonusFloat 4s ease-out forwards;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
        }
        
        @keyframes bonusFloat {
            0% {
                transform: translateY(100vh) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 1;
                transform: translateY(80vh) scale(1);
            }
            80% {
                opacity: 1;
            }
            100% {
                transform: translateY(-50px) scale(0.5);
                opacity: 0;
            }
        }
        
        /* –ö–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */
        .save-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary), var(--purple));
            border: 2px solid rgba(255,255,255,0.2);
            color: white;
            font-size: 24px;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .save-button:hover {
            transform: scale(1.1);
        }
        
        .save-button:active {
            transform: scale(0.9);
        }
        
        .export-button {
            position: fixed;
            bottom: 20px;
            left: 80px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(72, 202, 228, 0.8);
            border: 2px solid rgba(255,255,255,0.2);
            color: white;
            font-size: 20px;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .import-button {
            position: fixed;
            bottom: 20px;
            left: 140px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(199, 125, 255, 0.8);
            border: 2px solid rgba(255,255,255,0.2);
            color: white;
            font-size: 20px;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* –ò–∫–æ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */
        .save-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 24px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s;
            z-index: 10000;
            pointer-events: none;
        }
        
        /* –ü–∞–Ω–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */
        .save-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(26, 27, 46, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            z-index: 1000;
            font-size: 12px;
            color: #ffccd5;
            backdrop-filter: blur(10px);
            display: none;
        }
        
        /* –°—Ç–∏–ª–∏ —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ */
        .shop-section::-webkit-scrollbar {
            width: 8px;
        }
        
        .shop-section::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        
        .shop-section::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--primary), var(--purple));
            border-radius: 4px;
        }
        
        @media (max-width: 480px) {
            .heart-btn {
                width: 150px;
                height: 150px;
                font-size: 60px;
            }
            
            .pulse-ring {
                width: 180px;
                height: 180px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .animated-text {
                font-size: 1.4rem;
            }
            
            .kiss {
                font-size: 35px;
            }
            
            .save-button, .export-button, .import-button {
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
            
            .save-button {
                left: 10px;
            }
            
            .export-button {
                left: 65px;
            }
            
            .import-button {
                left: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- Canvas –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π —Ñ–æ–Ω–∞ -->
    <canvas id="bgCanvas"></canvas>
    
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div class="notification" id="notification"></div>
    
    <!-- –ü–∞–Ω–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
    <div class="save-panel" id="savePanel"></div>
    
    <!-- –ò–∫–æ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
    <div class="save-icon" id="saveIcon">üíæ</div>
    
    <!-- –°–∫—Ä—ã—Ç—ã–π input –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ -->
    <input type="file" id="fileInput" accept=".json" style="display: none;">
    
    <div class="container">
        <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–¥–ø–∏—Å—å -->
        <div class="smile-text">
            <div class="animated-text">üíñ –î–∏–∞–Ω–∫–∞, —É–ª—ã–±–∞–π—Å—è! üíñ</div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ -->
        <div class="heart-section">
            <div class="pulse-ring"></div>
            <div class="pulse-ring" style="animation-delay: 0.5s;"></div>
            <div class="pulse-ring" style="animation-delay: 1s;"></div>
            
            <button class="heart-btn" id="heartBtn">
                üíñ
            </button>
        </div>
        
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-icon">ü™ô</span>
                <span class="stat-value" id="coins">0</span>
                <div class="stat-label">–ú–æ–Ω–µ—Ç—ã</div>
            </div>
            <div class="stat-card">
                <span class="stat-icon">üíñ</span>
                <span class="stat-value" id="hearts">0</span>
                <div class="stat-label">–°–µ—Ä–¥–µ—á–∫–∏</div>
            </div>
            <div class="stat-card">
                <span class="stat-icon">‚ö°</span>
                <span class="stat-value" id="heartsPerSecond">0</span>
                <div class="stat-label">–í —Å–µ–∫—É–Ω–¥—É</div>
            </div>
            <div class="stat-card">
                <span class="stat-icon">üí™</span>
                <span class="stat-value" id="clickPower">1</span>
                <div class="stat-label">–°–∏–ª–∞ –∫–ª–∏–∫–∞</div>
            </div>
        </div>
        
        <!-- –ú–∞–≥–∞–∑–∏–Ω —É–ª—É—á—à–µ–Ω–∏–π -->
        <div class="shop-section">
            <div class="shop-header">
                <div class="shop-title">üõí –ú–∞–≥–∞–∑–∏–Ω —É–ª—É—á—à–µ–Ω–∏–π</div>
            </div>
            
            <div id="upgradesList">
                <!-- –£–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è–º–∏ -->
    <button class="save-button" id="saveBtn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É">üíæ</button>
    <button class="export-button" id="exportBtn" title="–≠–∫—Å–ø–æ—Ä—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è">üì§</button>
    <button class="import-button" id="importBtn" title="–ò–º–ø–æ—Ä—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è">üì•</button>

    <script>
        // ========== –ò–ì–†–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        let coins = 0;
        let hearts = 0;
        let clickPower = 1;
        let heartsPerSecond = 0;
        let lastUpdate = Date.now();
        let totalCoinsEarned = 0; // –°—á–µ—Ç—á–∏–∫ –≤—Å–µ—Ö –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç
        let lastBonusCoins = 0;   // –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –¥–∞–≤–∞–ª–∏ –±–æ–Ω—É—Å
        let stars = [];
        let activeKisses = []; // –ú–∞—Å—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ü–µ–ª—É–π—á–∏–∫–æ–≤
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const heartBtn = document.getElementById('heartBtn');
        const coinsEl = document.getElementById('coins');
        const heartsEl = document.getElementById('hearts');
        const heartsPerSecondEl = document.getElementById('heartsPerSecond');
        const clickPowerEl = document.getElementById('clickPower');
        const upgradesList = document.getElementById('upgradesList');
        const notification = document.getElementById('notification');
        const bgCanvas = document.getElementById('bgCanvas');
        const ctx = bgCanvas.getContext('2d');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        const saveBtn = document.getElementById('saveBtn');
        const exportBtn = document.getElementById('exportBtn');
        const importBtn = document.getElementById('importBtn');
        const fileInput = document.getElementById('fileInput');
        const saveIcon = document.getElementById('saveIcon');
        const savePanel = document.getElementById('savePanel');
        
        // ========== –ú–ê–ì–ê–ó–ò–ù –£–õ–£–ß–®–ï–ù–ò–ô ==========
        const upgrades = [
            {
                id: 1,
                name: "üíñ –ú–∏–ª–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ",
                description: "–ú–∞–ª–µ–Ω—å–∫–∞—è –ø–æ—Ä—Ü–∏—è –ª—é–±–≤–∏",
                baseCost: 20,
                cost: 20,
                heartsPerSecond: 1,
                count: 0
            },
            {
                id: 2,
                name: "üíï –ü–∞—Ä—è—â–µ–µ —Å–µ—Ä–¥–µ—á–∫–æ",
                description: "–õ–µ—Ç–∞–µ—Ç –≤–æ–∫—Ä—É–≥ —ç–∫—Ä–∞–Ω–∞",
                baseCost: 75,
                cost: 75,
                heartsPerSecond: 3,
                count: 0
            },
            {
                id: 3,
                name: "üíò –°–µ—Ä–¥—Ü–µ –ö—É–ø–∏–¥–æ–Ω–∞",
                description: "–°—Ç—Ä–µ–ª–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –ø—Ä—è–º–æ –≤ —Ü–µ–ª—å",
                baseCost: 250,
                cost: 250,
                heartsPerSecond: 10,
                count: 0
            },
            {
                id: 4,
                name: "üíù –ü–æ–¥–∞—Ä–æ—á–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ",
                description: "–° –∫—Ä–∞—Å–∏–≤—ã–º –±–∞–Ω—Ç–∏–∫–æ–º",
                baseCost: 750,
                cost: 750,
                heartsPerSecond: 25,
                count: 0
            },
            {
                id: 5,
                name: "üêµ –û–±–µ–∑—å—è–Ω–∫–∞ –ª—é–±–≤–∏",
                description: "–ó–∞–±–∞–≤–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö",
                baseCost: 2000,
                cost: 2000,
                heartsPerSecond: 70,
                count: 0
            },
            {
                id: 6,
                name: "üëë –ó–æ–ª–æ—Ç–æ–µ —Å–µ—Ä–¥—Ü–µ",
                description: "–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ª—é–±–≤–∏",
                baseCost: 5000,
                cost: 5000,
                heartsPerSecond: 200,
                count: 0
            }
        ];
        
        // ========== –°–ò–°–¢–ï–ú–ê –°–û–•–†–ê–ù–ï–ù–ò–Ø ==========
        const SAVE_KEY = 'loveClicker_save_v2';
        let autoSaveInterval;
        
        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–≥—Ä—ã
        function saveGame() {
            try {
                const saveData = {
                    // –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                    coins: coins,
                    hearts: hearts,
                    clickPower: clickPower,
                    heartsPerSecond: heartsPerSecond,
                    totalCoinsEarned: totalCoinsEarned,
                    lastBonusCoins: lastBonusCoins,
                    
                    // –î–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏–π
                    upgrades: upgrades.map(u => ({
                        id: u.id,
                        count: u.count,
                        cost: u.cost
                    })),
                    
                    // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
                    saveTime: Date.now(),
                    version: '2.0'
                };
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                localStorage.setItem(SAVE_KEY, JSON.stringify(saveData));
                
                console.log('üíæ –ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–∫–æ–Ω–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                showSaveIcon();
                
                return true;
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
                return false;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã
        function loadGame() {
            try {
                // –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ localStorage
                const savedData = localStorage.getItem(SAVE_KEY);
                
                if (!savedData) {
                    console.log('üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –∏–≥—Ä—É');
                    return false;
                }
                
                const save = JSON.parse(savedData);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é
                if (save.version !== '2.0') {
                    console.log('üíæ –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –∏–≥—Ä—É');
                    return false;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —É—Å—Ç–∞—Ä–µ–ª–æ –ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (–±–æ–ª—å—à–µ 30 –¥–Ω–µ–π)
                const thirtyDays = 30 * 24 * 60 * 60 * 1000;
                if (Date.now() - save.saveTime > thirtyDays) {
                    console.log('üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–ª–æ (30+ –¥–Ω–µ–π)');
                    return false;
                }
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                coins = save.coins || 0;
                hearts = save.hearts || 0;
                clickPower = save.clickPower || 1;
                heartsPerSecond = save.heartsPerSecond || 0;
                totalCoinsEarned = save.totalCoinsEarned || 0;
                lastBonusCoins = save.lastBonusCoins || 0;
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —É–ª—É—á—à–µ–Ω–∏—è
                if (save.upgrades && Array.isArray(save.upgrades)) {
                    save.upgrades.forEach(savedUpgrade => {
                        const upgrade = upgrades.find(u => u.id === savedUpgrade.id);
                        if (upgrade) {
                            upgrade.count = savedUpgrade.count || 0;
                            upgrade.cost = savedUpgrade.cost || upgrade.baseCost * Math.pow(1.5, upgrade.count);
                        }
                    });
                }
                
                console.log('üíæ –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
                showNotification('üíæ –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∂–µ–Ω!');
                return true;
                
            } catch (error) {
                console.error('üíæ –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                return false;
            }
        }
        
        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        function startAutoSave() {
            if (autoSaveInterval) clearInterval(autoSaveInterval);
            autoSaveInterval = setInterval(saveGame, 30000); // 30 —Å–µ–∫—É–Ω–¥
        }
        
        // –ò–∫–æ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        function showSaveIcon() {
            saveIcon.style.opacity = '1';
            saveIcon.style.transform = 'translateY(0)';
            
            setTimeout(() => {
                saveIcon.style.opacity = '0';
                saveIcon.style.transform = 'translateY(10px)';
            }, 2000);
        }
        
        // –≠–∫—Å–ø–æ—Ä—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        function exportSave() {
            const saveData = localStorage.getItem(SAVE_KEY);
            if (saveData) {
                const blob = new Blob([saveData], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `love-clicker-save-${new Date().toISOString().slice(0,10)}.json`;
                a.click();
                showNotification('üì§ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ!');
            } else {
                showNotification('üíæ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞');
            }
        }
        
        // –ò–º–ø–æ—Ä—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        function importSave(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
                    if (data && data.version && data.coins !== undefined) {
                        if (confirm('–ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ? –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω.')) {
                            localStorage.setItem(SAVE_KEY, e.target.result);
                            showNotification('üì• –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º...');
                            setTimeout(() => location.reload(), 1500);
                        }
                    } else {
                        showNotification('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞');
                    }
                } catch (error) {
                    showNotification('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞');
                }
            };
            reader.readAsText(file);
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        function updateSavePanel() {
            const saveData = localStorage.getItem(SAVE_KEY);
            if (saveData) {
                const data = JSON.parse(saveData);
                const saveTime = new Date(data.saveTime).toLocaleTimeString();
                savePanel.innerHTML = `
                    <div>üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: ${saveTime}</div>
                    <div>ü™ô –ú–æ–Ω–µ—Ç: ${data.coins || 0}</div>
                    <div>üíñ/—Å–µ–∫: ${data.heartsPerSecond || 0}</div>
                `;
            }
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        function setupSaveButtons() {
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            saveBtn.addEventListener('click', function() {
                saveGame();
                showNotification('üíæ –ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
                this.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 150);
            });
            
            // –≠–∫—Å–ø–æ—Ä—Ç
            exportBtn.addEventListener('click', exportSave);
            
            // –ò–º–ø–æ—Ä—Ç
            importBtn.addEventListener('click', () => fileInput.click());
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
            fileInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    importSave(file);
                }
                this.value = ''; // –°–±—Ä–æ—Å input
            });
            
            // –î–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ —Å–µ—Ä–¥–µ—á–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∞–Ω–µ–ª—å
            heartBtn.addEventListener('touchstart', function(e) {
                this.longPressTimer = setTimeout(() => {
                    updateSavePanel();
                    savePanel.style.display = 'block';
                    setTimeout(() => {
                        savePanel.style.display = 'none';
                    }, 3000);
                }, 1500);
            });
            
            heartBtn.addEventListener('touchend', function() {
                if (this.longPressTimer) {
                    clearTimeout(this.longPressTimer);
                }
            });
        }
        
        // ========== –ù–ê–°–¢–†–û–ô–ö–ê CANVAS ==========
        function setupCanvas() {
            bgCanvas.width = window.innerWidth;
            bgCanvas.height = window.innerHeight;
            
            stars = [];
            for (let i = 0; i < 80; i++) {
                stars.push({
                    x: Math.random() * bgCanvas.width,
                    y: Math.random() * bgCanvas.height,
                    size: Math.random() * 2 + 0.5,
                    speed: Math.random() * 0.3 + 0.1,
                    opacity: Math.random() * 0.5 + 0.3
                });
            }
        }
        
        // ========== –ê–ù–ò–ú–ê–¶–ò–Ø –§–û–ù–ê ==========
        function animateBackground() {
            ctx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
            
            // –†–∏—Å—É–µ–º –∑–≤–µ–∑–¥—ã
            stars.forEach(star => {
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
                ctx.fill();
                
                star.y += star.speed;
                if (star.y > bgCanvas.height) {
                    star.y = 0;
                    star.x = Math.random() * bgCanvas.width;
                }
            });
            
            requestAnimationFrame(animateBackground);
        }
        
        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´ ==========
        function initGame() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            loadGame();
            
            setupCanvas();
            animateBackground();
            updateDisplay();
            renderUpgrades();
            gameLoop();
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            setupSaveButtons();
            startAutoSave();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            window.addEventListener('beforeunload', saveGame);
            window.addEventListener('pagehide', saveGame);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
            document.addEventListener('visibilitychange', function() {
                if (document.hidden) {
                    saveGame();
                }
            });
            
            showNotification("üíñ –ù–∞—á–Ω–∏ —Å–æ–±–∏—Ä–∞—Ç—å –ª—é–±–æ–≤—å!");
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
            checkShopAvailability();
        }
        
        // ========== –ò–ì–†–û–í–û–ô –¶–ò–ö–õ ==========
        function gameLoop() {
            const now = Date.now();
            const delta = now - lastUpdate;
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–æ—Ö–æ–¥
            if (heartsPerSecond > 0) {
                hearts += (heartsPerSecond * delta) / 1000;
                
                // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å–µ—Ä–¥–µ—á–µ–∫ –≤ –º–æ–Ω–µ—Ç—ã
                if (hearts >= 10) {
                    const earnedCoins = Math.floor(hearts / 10);
                    if (earnedCoins > 0) {
                        addCoins(earnedCoins);
                        hearts = hearts % 10;
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 5 –Ω–∞–∫–ª–∏–∫–∞–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç
                        checkEvery5Coins();
                    }
                }
            }
            
            lastUpdate = now;
            updateDisplay();
            requestAnimationFrame(gameLoop);
        }
        
        // ========== –î–û–ë–ê–í–õ–ï–ù–ò–ï –ú–û–ù–ï–¢ (–û–ë–©–ê–Ø –°–£–ú–ú–ê) ==========
        function addCoins(amount) {
            const oldCoins = coins;
            coins += amount;
            totalCoinsEarned += amount; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –≤—Å–µ—Ö –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç
            
            console.log(`–î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –º–æ–Ω–µ—Ç. –í—Å–µ–≥–æ: ${coins}, –í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: ${totalCoinsEarned}`);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –º–∞–≥–∞–∑–∏–Ω –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –º–æ–Ω–µ—Ç
            updateShopButtons();
        }
        
        // ========== –ü–†–û–í–ï–†–ö–ê –ö–ê–ñ–î–´–• 5 –ù–ê–ö–õ–ò–ö–ê–ù–ù–´–• –ú–û–ù–ï–¢ ==========
        function checkEvery5Coins() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏ –º—ã –Ω–æ–≤–æ–≥–æ –∫—Ä–∞—Ç–Ω–æ–≥–æ 5 –∑–Ω–∞—á–µ–Ω–∏—è –≤ totalCoinsEarned
            if (totalCoinsEarned >= 5 && totalCoinsEarned >= lastBonusCoins + 5) {
                // –î–æ–±–∞–≤–ª—è–µ–º –±–æ–Ω—É—Å–Ω—ã–µ 5 –º–æ–Ω–µ—Ç –≤ –æ–±—â—É—é —Å—É–º–º—É
                addCoins(5);
                lastBonusCoins = totalCoinsEarned;
                
                showNotification("üíù –ú–æ—è —Ç—ã —É–º–Ω–∏—á–∫–∞! +5 –±–æ–Ω—É—Å–Ω—ã—Ö –º–æ–Ω–µ—Ç!");
                
                // –°–æ–∑–¥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –±–æ–Ω—É—Å–Ω—ã—Ö –º–æ–Ω–µ—Ç
                createBonusEffect();
                
                // –°–æ–∑–¥–∞–µ–º –ø–æ—Ü–µ–ª—É–π—á–∏–∫ –∑–∞ –∫–∞–∂–¥—ã–µ 5 –Ω–∞–∫–ª–∏–∫–∞–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç
                spawnKiss();
            }
        }
        
        // ========== –≠–§–§–ï–ö–¢ –ë–û–ù–£–°–ù–´–• –ú–û–ù–ï–¢ ==========
        function createBonusEffect() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const bonus = document.createElement('div');
                    bonus.className = 'bonus-5-coins';
                    bonus.textContent = 'ü™ô';
                    bonus.style.left = Math.random() * 80 + 10 + 'vw';
                    bonus.style.fontSize = (20 + Math.random() * 15) + 'px';
                    
                    document.body.appendChild(bonus);
                    
                    setTimeout(() => {
                        if (bonus.parentNode) {
                            bonus.remove();
                        }
                    }, 4000);
                }, i * 200);
            }
        }
        
        // ========== –ü–û–¶–ï–õ–£–ô–ß–ò–ö–ò ==========
        function spawnKiss() {
            const kiss = document.createElement('div');
            kiss.className = 'kiss';
            kiss.textContent = 'üíã';
            kiss.style.left = Math.random() * 70 + 15 + 'vw';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
            kiss.addEventListener('click', function(e) {
                e.stopPropagation();
                catchKiss(this);
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤
            kiss.addEventListener('touchstart', function(e) {
                e.stopPropagation();
                catchKiss(this);
                e.preventDefault();
            }, { passive: false });
            
            document.body.appendChild(kiss);
            activeKisses.push(kiss);
            
            // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 6 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (kiss.parentNode) {
                    kiss.remove();
                    activeKisses = activeKisses.filter(k => k !== kiss);
                }
            }, 6000);
        }
        
        function catchKiss(kissElement) {
            if (kissElement.classList.contains('caught')) return;
            
            kissElement.classList.add('caught');
            addCoins(50); // +50 –º–æ–Ω–µ—Ç –∑–∞ –ø–æ—Ü–µ–ª—É–π—á–∏–∫
            showNotification("üíã –ü–æ–π–º–∞–ª–∞ –ø–æ—Ü–µ–ª—É–π—á–∏–∫! +50 –º–æ–Ω–µ—Ç!");
            
            // –°–æ–∑–¥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ª–æ–≤–ª–∏ –ø–æ—Ü–µ–ª—É–π—á–∏–∫–∞
            createKissCatchEffect(kissElement);
            
            setTimeout(() => {
                if (kissElement.parentNode) {
                    kissElement.remove();
                    activeKisses = activeKisses.filter(k => k !== kissElement);
                }
            }, 800);
        }
        
        function createKissCatchEffect(kissElement) {
            const rect = kissElement.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            
            // –°–æ–∑–¥–∞–µ–º –≤–∑—Ä—ã–≤ —Å–µ—Ä–¥–µ—á–µ–∫
            for (let i = 0; i < 12; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.textContent = '‚ù§Ô∏è';
                    heart.style.position = 'fixed';
                    heart.style.left = x + 'px';
                    heart.style.top = y + 'px';
                    heart.style.fontSize = '20px';
                    heart.style.zIndex = '999';
                    heart.style.pointerEvents = 'none';
                    
                    const angle = (i * 30) * Math.PI / 180;
                    const distance = 100;
                    
                    document.body.appendChild(heart);
                    
                    heart.animate([
                        { 
                            transform: 'translate(0, 0) scale(1)',
                            opacity: 1 
                        },
                        { 
                            transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0)`,
                            opacity: 0 
                        }
                    ], {
                        duration: 1000,
                        easing: 'ease-out'
                    });
                    
                    setTimeout(() => heart.remove(), 1000);
                }, i * 50);
            }
        }
        
        // ========== –ö–õ–ò–ö –ü–û –°–ï–†–î–ï–ß–ö–£ ==========
        heartBtn.addEventListener('click', (e) => {
            hearts += clickPower;
            
            // –≠—Ñ—Ñ–µ–∫—Ç –∫–ª–∏–∫–∞
            createClickEffect(e);
            
            // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –º–æ–Ω–µ—Ç—ã
            if (hearts >= 10) {
                const earnedCoins = Math.floor(hearts / 10);
                if (earnedCoins > 0) {
                    addCoins(earnedCoins);
                    hearts = hearts % 10;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 5 –Ω–∞–∫–ª–∏–∫–∞–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç
                    checkEvery5Coins();
                }
            }
            
            updateDisplay();
        });
        
        // ========== –≠–§–§–ï–ö–¢ –ö–õ–ò–ö–ê ==========
        function createClickEffect(event) {
            const rect = heartBtn.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—É
            const particle = document.createElement('div');
            particle.style.position = 'absolute';
            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            particle.style.width = '10px';
            particle.style.height = '10px';
            particle.style.background = 'radial-gradient(circle, #ff6b8b, #ff4081)';
            particle.style.borderRadius = '50%';
            particle.style.pointerEvents = 'none';
            particle.style.zIndex = '1';
            
            heartBtn.appendChild(particle);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            particle.animate([
                { transform: 'scale(1)', opacity: 1 },
                { transform: 'scale(3)', opacity: 0 }
            ], {
                duration: 600,
                easing: 'ease-out'
            });
            
            setTimeout(() => particle.remove(), 600);
        }
        
        // ========== –ü–û–ö–£–ü–ö–ê –£–õ–£–ß–®–ï–ù–ò–ô ==========
        function buyUpgrade(id) {
            const upgrade = upgrades.find(u => u.id === id);
            
            if (!upgrade) {
                console.error('–£–ª—É—á—à–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ:', id);
                return;
            }
            
            console.log('–ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è:', upgrade.name, '–¶–µ–Ω–∞:', upgrade.cost, '–ú–æ–Ω–µ—Ç—ã:', coins);
            
            if (coins >= upgrade.cost) {
                // –°–ø–∏—Å–∞–Ω–∏–µ –º–æ–Ω–µ—Ç
                coins -= upgrade.cost;
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞
                heartsPerSecond += upgrade.heartsPerSecond;
                upgrade.count++;
                
                // –ü–µ—Ä–µ—Å—á–µ—Ç —Ü–µ–Ω—ã
                upgrade.cost = Math.floor(upgrade.baseCost * Math.pow(1.5, upgrade.count));
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                updateDisplay();
                renderUpgrades();
                
                showNotification(`üéâ –ö—É–ø–∏–ª–∏ ${upgrade.name}!`);
                createPurchaseEffect();
                
                // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏
                setTimeout(saveGame, 500);
                
                console.log('–£–ª—É—á—à–µ–Ω–∏–µ –∫—É–ø–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ! –ù–æ–≤—ã–π –¥–æ—Ö–æ–¥:', heartsPerSecond);
            } else {
                console.log('–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–æ–Ω–µ—Ç! –ù—É–∂–Ω–æ:', upgrade.cost, '–ï—Å—Ç—å:', coins);
                showNotification(`üí∞ –ù—É–∂–Ω–æ ${upgrade.cost} –º–æ–Ω–µ—Ç!`);
            }
        }
        
        // ========== –û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–ù–û–ü–û–ö –ú–ê–ì–ê–ó–ò–ù–ê ==========
        function updateShopButtons() {
            const buttons = document.querySelectorAll('.buy-btn');
            buttons.forEach(button => {
                const costText = button.closest('.upgrade-item')?.querySelector('.upgrade-cost')?.textContent;
                if (costText) {
                    const cost = parseInt(costText.replace('ü™ô', '').trim());
                    if (!isNaN(cost)) {
                        if (coins >= cost) {
                            button.classList.remove('disabled');
                            button.classList.add('enabled');
                            button.disabled = false;
                            button.textContent = '–ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å üíù';
                        } else {
                            button.classList.remove('enabled');
                            button.classList.add('disabled');
                            button.disabled = true;
                            button.textContent = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç';
                        }
                    }
                }
            });
        }
        
        // ========== –ü–†–û–í–ï–†–ö–ê –î–û–°–¢–£–ü–ù–û–°–¢–ò –ú–ê–ì–ê–ó–ò–ù–ê –ü–†–ò –°–¢–ê–†–¢–ï ==========
        function checkShopAvailability() {
            setTimeout(() => {
                updateShopButtons();
            }, 100);
        }
        
        // ========== –≠–§–§–ï–ö–¢ –ü–û–ö–£–ü–ö–ò ==========
        function createPurchaseEffect() {
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const spark = document.createElement('div');
                    spark.style.position = 'fixed';
                    spark.style.left = '50%';
                    spark.style.top = '50%';
                    spark.style.width = '5px';
                    spark.style.height = '5px';
                    spark.style.background = `hsl(${Math.random() * 360}, 100%, 60%)`;
                    spark.style.borderRadius = '50%';
                    spark.style.pointerEvents = 'none';
                    spark.style.zIndex = '999';
                    
                    const angle = Math.random() * Math.PI * 2;
                    const distance = 100 + Math.random() * 100;
                    
                    document.body.appendChild(spark);
                    
                    spark.animate([
                        { 
                            transform: 'translate(-50%, -50%) scale(1)',
                            opacity: 1 
                        },
                        { 
                            transform: `translate(${Math.cos(angle) * distance - 50}px, ${Math.sin(angle) * distance - 50}px) scale(0)`,
                            opacity: 0 
                        }
                    ], {
                        duration: 800,
                        easing: 'ease-out'
                    });
                    
                    setTimeout(() => spark.remove(), 800);
                }, i * 50);
            }
        }
        
        // ========== –£–õ–£–ß–®–ï–ù–ò–ï –°–ò–õ–´ –ö–õ–ò–ö–ê ==========
        function upgradeClickPower() {
            const cost = clickPower * 100;
            
            if (coins >= cost) {
                coins -= cost;
                clickPower += 1;
                updateDisplay();
                showNotification(`üí™ –°–∏–ª–∞ –∫–ª–∏–∫–∞: ${clickPower}`);
                createPurchaseEffect();
                
                // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏—è
                setTimeout(saveGame, 500);
            } else {
                showNotification(`üí∞ –ù—É–∂–Ω–æ ${cost} –º–æ–Ω–µ—Ç!`);
            }
        }
        
        // ========== –û–ë–ù–û–í–õ–ï–ù–ò–ï –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø ==========
        function updateDisplay() {
            coinsEl.textContent = coins;
            heartsEl.textContent = hearts.toFixed(1);
            heartsPerSecondEl.textContent = heartsPerSecond.toFixed(1);
            clickPowerEl.textContent = clickPower;
            
            updateShopButtons();
        }
        
        // ========== –†–ï–ù–î–ï–† –ú–ê–ì–ê–ó–ò–ù–ê ==========
        function renderUpgrades() {
            upgradesList.innerHTML = '';
            
            upgrades.forEach(upgrade => {
                const canAfford = coins >= upgrade.cost;
                
                const upgradeEl = document.createElement('div');
                upgradeEl.className = 'upgrade-item';
                upgradeEl.innerHTML = `
                    <div class="upgrade-header">
                        <div class="upgrade-name">
                            ${upgrade.name}
                        </div>
                        <div class="upgrade-cost">${upgrade.cost} ü™ô</div>
                    </div>
                    <div style="color: #ffccd5; font-size: 0.9rem; margin: 5px 0;">
                        ${upgrade.description}
                    </div>
                    <div class="upgrade-info">
                        <div class="upgrade-effect">
                            <span>+${upgrade.heartsPerSecond} üíñ/—Å–µ–∫</span>
                        </div>
                        <div class="upgrade-count">
                            –ö—É–ø–ª–µ–Ω–æ: ${upgrade.count}
                        </div>
                    </div>
                    <button class="buy-btn ${canAfford ? 'enabled' : 'disabled'}" 
                            onclick="buyUpgrade(${upgrade.id})" 
                            ${canAfford ? '' : 'disabled'}>
                        ${canAfford ? '–ö—É–ø–∏—Ç—å —Å–µ–π—á–∞—Å üíù' : '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç'}
                    </button>
                `;
                upgradesList.appendChild(upgradeEl);
            });
            
            const clickUpgradeCost = clickPower * 100;
            const canAffordClick = coins >= clickUpgradeCost;
            
            const clickUpgradeEl = document.createElement('div');
            clickUpgradeEl.className = 'upgrade-item';
            clickUpgradeEl.innerHTML = `
                <div class="upgrade-header">
                    <div class="upgrade-name">üí™ –£—Å–∏–ª–µ–Ω–∏–µ –∫–ª–∏–∫–∞</div>
                    <div class="upgrade-cost">${clickUpgradeCost} ü™ô</div>
                </div>
                <div style="color: #ffccd5; font-size: 0.9rem; margin: 5px 0;">
                    –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–∫–∞
                </div>
                <div class="upgrade-info">
                    <div>–¢–µ–∫—É—â–∞—è —Å–∏–ª–∞: ${clickPower}</div>
                    <div>–°–ª–µ–¥—É—é—â–∞—è: ${clickPower + 1}</div>
                </div>
                <button class="buy-btn ${canAffordClick ? 'enabled' : 'disabled'}" 
                        onclick="upgradeClickPower()" 
                        ${canAffordClick ? '' : 'disabled'}>
                    ${canAffordClick ? '–£–ª—É—á—à–∏—Ç—å —Å–∏–ª—É' : '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç'}
                </button>
            `;
            upgradesList.appendChild(clickUpgradeEl);
        }
        
        // ========== –ü–û–ö–ê–ó –£–í–ï–î–û–ú–õ–ï–ù–ò–ô ==========
        function showNotification(text) {
            notification.textContent = text;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // ========== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ==========
        window.addEventListener('resize', setupCanvas);
        window.addEventListener('load', initGame);
        
        // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        document.addEventListener('touchstart', (e) => {
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –Ω–∞ –ø–æ—Ü–µ–ª—É–π—á–∏–∫–∏
            if (e.target.classList.contains('kiss')) {
                catchKiss(e.target);
            }
        });
        
        // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
        document.addEventListener('touchstart', () => {}, { passive: true });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏)
        window.addTestCoins = function(amount) {
            addCoins(amount);
            updateDisplay();
            console.log(`–¢–µ—Å—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –º–æ–Ω–µ—Ç. –í—Å–µ–≥–æ: ${coins}`);
        };
    </script>
</body>
</html>
